<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海报绘制</title>
    <style>
        .draw-area {
            box-sizing: border-box;
        }
    </style>
    <script type="module">
        import { DrawPoster } from '../dist/index.js'
        window.onload = async () => {
            const draw = new DrawPoster({
                root: document.querySelector('.draw-area'),
                dpi: 2,
                width: 400,
                height: 700
            })



            let btn0 = document.getElementById('btn0')
            let btn1 = document.getElementById('btn1')
            let btn2 = document.getElementById('btn2')
            let btn3 = document.getElementById('btn3')
            let btn4 = document.getElementById('btn4')
            let btn5 = document.getElementById('btn5')

            btn0.onclick = async () => {
                await draw.draw([
                    { // 背景
                        type: 'image',
                        content: 'https://img.emoz.cloud/static/63a1a6a60eecde0cf08293943b16ff01.png',
                        style: {
                            width: 400,
                            height: 700,
                            top: 0,
                            left: 0,
                            level: 'bottom',
                        }
                    },
                    { // 二维码
                        type: 'image',
                        content: 'https://img.emoz.cloud/share_qrcode/6bb5064e-5cb8-43e7-a6c5-d9848be5d664.png',
                        style: {
                            width: 110,
                            height: 110,
                            left: 145,
                            top: 520,
                        }
                    },
                    { // 剧本封面
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 80,
                            height: 110,
                            left: 50,
                            top: 200,
                            radio: 6
                        }
                    },
                    { // 剧本名
                        type: 'text',
                        content: '剧本杀',
                        style: {
                            left: 140,
                            top: 220,
                            fontSize: 18,
                            color: '#333'
                        }
                    },
                    { // 人物昵称
                        type: 'text',
                        content: 'DM黄某',
                        style: {
                            left: 165,
                            top: 245,
                            fontSize: 14,
                            color: '#333'
                        }
                    },
                    { // 人物头像
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 20,
                            height: 20,
                            left: 140,
                            top: 230,
                            radio: 10
                        }
                    },
                    {// 时间
                        type: 'text',
                        content: '今天19:00',
                        style: {
                            left: 140,
                            top: 270,
                            fontSize: 14,
                            color: '#333'
                        }
                    },
                    { // 时长
                        type: 'text',
                        content: '5.5小时',
                        style: {
                            left: 240,
                            top: 270,
                            fontSize: 14,
                            color: '#999'
                        }
                    },
                    { // 标签
                        type: 'rect',
                        content: '机制',
                        style: {
                            width: 40,
                            height: 20,
                            left: 190,
                            top: 285,
                            fillColor: '#fff',
                            textAlign: 'middle',
                        }
                    },
                    { // 标签
                        type: 'rect',
                        content: '情感',
                        style: {
                            width: 40,
                            height: 20,
                            left: 140,
                            top: 285,
                            fillColor: '#fff',
                            textAlign: 'middle',
                            radio: 3
                        }
                    },
                    { // 标签
                        type: 'rect',
                        content: '都市',
                        style: {
                            width: 40,
                            height: 20,
                            left: 240,
                            top: 285,
                            fillColor: '#fff',
                            textAlign: 'middle',
                        }
                    },
                    { // 玩家1
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 50,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家2
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 92,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家3
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 134,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家4
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 176,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家5
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 218,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家6
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 260,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家7
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 302,
                            top: 340,
                            radio: 18
                        }
                    },
                    { // 玩家8
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 50,
                            top: 390,
                            radio: 18
                        }
                    },
                    { // 玩家9
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 92,
                            top: 390,
                            radio: 18
                        }
                    },
                    { // 玩家10
                        type: 'image',
                        content: 'https://img.emoz.cloud/drama_cover/c8617dbc62127e3c011ada388b22e1e4.jpg?imageMogr2/format/jpg/quality/70/thumbnail/!70p',
                        style: {
                            width: 35,
                            height: 35,
                            left: 134,
                            top: 390,
                            radio: 18
                        }
                    },
                ])
            }

            btn1.onclick = () => {
                let base64 = draw.export('base64')
                let file = draw.export('file', 'test')
                console.debug(base64)
                console.debug(file)
            }

            btn2.onclick = () => {
                draw.clear()
            }

            btn3.onclick = () => {
                draw.download('base64', draw.export('base64'), '1.jpeg')
            }

            btn4.onclick = () => {
                draw.download('file', draw.export('file', 'file'), '1.jpeg')
            }

            btn5.onclick = () => {
                draw.download('blob', draw.export('blob', 'file'), '1.jpeg')
            }
        }
    </script>
</head>

<body>
    <div class="draw-area"></div>
    <button id="btn0">绘制</button>
    <button id="btn1">点击导出</button>
    <button id="btn2">清除</button>
    <button id="btn3">下载base64</button>
    <button id="btn4">下载File</button>
    <button id="btn5">下载Blob</button>
</body>

</html>